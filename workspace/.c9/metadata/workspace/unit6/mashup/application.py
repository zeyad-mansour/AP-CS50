{"filter":false,"title":"application.py","tooltip":"~/workspace/unit6/mashup/application.py","undoManager":{"mark":7,"position":7,"stack":[[{"start":{"row":35,"column":2},"end":{"row":37,"column":0},"action":"remove","lines":["  # TODO","    return jsonify([])",""],"id":2},{"start":{"row":35,"column":2},"end":{"row":48,"column":32},"action":"insert","lines":["  geo = request.args.get(\"geo\")","    ","    # if argument is missing, raise RuntimeError","    if not geo:","        raise RuntimeError(\"Geo not set\")","    ","    # search for articles in that geo","    articles = lookup(geo)","        ","    # return up to 5 articles as a JSON object","    if len(articles) > 5:","        return jsonify([articles[0], articles[1], articles[2], articles[4], articles[5]])","    else:","        return jsonify(articles)"]}],[{"start":{"row":44,"column":0},"end":{"row":44,"column":46},"action":"remove","lines":["    # return up to 5 articles as a JSON object"],"id":3},{"start":{"row":43,"column":8},"end":{"row":44,"column":0},"action":"remove","lines":["",""]},{"start":{"row":43,"column":4},"end":{"row":43,"column":8},"action":"remove","lines":["    "]},{"start":{"row":43,"column":0},"end":{"row":43,"column":4},"action":"remove","lines":["    "]},{"start":{"row":42,"column":26},"end":{"row":43,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":40,"column":0},"end":{"row":41,"column":37},"action":"remove","lines":["    ","    # search for articles in that geo"],"id":4},{"start":{"row":39,"column":41},"end":{"row":40,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":36,"column":0},"end":{"row":37,"column":48},"action":"remove","lines":["    ","    # if argument is missing, raise RuntimeError"],"id":5},{"start":{"row":35,"column":33},"end":{"row":36,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":45,"column":0},"end":{"row":49,"column":22},"action":"remove","lines":["def search():","    \"\"\"Search for places that match query\"\"\"","","    # TODO","    return jsonify([])"],"id":6},{"start":{"row":45,"column":0},"end":{"row":59,"column":29},"action":"insert","lines":["def search():","    ","    # retrieve q from HTML form ","    q = request.args.get(\"q\") + \"%\"","    ","    # Finds any postal code, city and state that start with q","    place = db.execute(\"SELECT * FROM places WHERE postal_code \\","                                LIKE :q OR place_name LIKE :q OR admin_name1 LIKE :q\", q=q)","                                ","    # Return up to 10 places found as JSON object","    if len(place) > 10:","        return jsonify([place[0], place[1], place[2],  place[3],  place[4],","                        place[5], place[6],  place[7],  place[8],  place[9]])","    else:","        return jsonify(place)"]}],[{"start":{"row":46,"column":0},"end":{"row":47,"column":32},"action":"remove","lines":["    ","    # retrieve q from HTML form "],"id":7},{"start":{"row":45,"column":13},"end":{"row":46,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":47,"column":0},"end":{"row":48,"column":61},"action":"remove","lines":["    ","    # Finds any postal code, city and state that start with q"],"id":8},{"start":{"row":46,"column":35},"end":{"row":47,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":49,"column":0},"end":{"row":50,"column":49},"action":"remove","lines":["                                ","    # Return up to 10 places found as JSON object"],"id":9},{"start":{"row":48,"column":91},"end":{"row":49,"column":0},"action":"remove","lines":["",""]}]]},"ace":{"folds":[],"scrolltop":660,"scrollleft":0,"selection":{"start":{"row":48,"column":91},"end":{"row":48,"column":91},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1555983336180,"hash":"a10d903a2363f01f57448e3c8e02653bf09cdc53"}