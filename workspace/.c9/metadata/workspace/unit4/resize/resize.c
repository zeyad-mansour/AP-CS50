{"filter":false,"title":"resize.c","tooltip":"~/workspace/unit4/resize/resize.c","ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":108,"column":1},"end":{"row":108,"column":1},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"hash":"336fc3af382c06725767ba852965bd8978ae31b9","undoManager":{"mark":31,"position":31,"stack":[[{"start":{"row":0,"column":0},"end":{"row":104,"column":1},"action":"insert","lines":["*/Layout- ","Open the file.","Update the outfile's header info","Read infile's scanline pixel by pixel","Resize horizontally","Address the padding adjustments","resize vertically","REMEMBER TO REFERENCE TO COPY.C","/*","","","#include <stdio.h>","#include <stdlib.h>","#include \"bmp.h\"","","int main(int argc, char* argv[])","{","    if (argc != 4)","    {","        return 1;","    }","","    char* infile = argv[2];","\tchar* outfile = argv[3];","","    int n = atoi(argv[1]);","    if (n =< 100 == false) // must be less than or equal to 100","    {","        return 1;","    }","","    FILE* inptr = fopen(infile, \"r\"); //remember that \"r\" is for reading only. file pointer is placed at the beginning of the file.","    if (inptr == NULL)","    {","\t\tprintf(\"Could not open %s.\\n\", infile);","        return 2;","    }","","    FILE* outptr = fopen(outfile, \"w\");","    if (outptr == NULL)","    {","        fclose(inptr);","\t\tfprintf(stderr, \"Could not create %s.\\n\", outfile);","        return 3;","    }","","    BITMAPFILEHEADER bf;","    fread(&bf, sizeof(BITMAPFILEHEADER), 1, inptr);","","    // read infile's BITMAPINFOHEADER","    BITMAPINFOHEADER bi;","    fread(&bi, sizeof(BITMAPINFOHEADER), 1, inptr);","    ","    // ensure infile is (likely) a 24-bit uncompressed BMP 4.0","    if (bf.bfType != 0x4d42 || bf.bfOffBits != 54 || bi.biSize != 40 || ","        bi.biBitCount != 24 || bi.biCompression != 0)","    {","        fclose(outptr);","        fclose(inptr);","        fprintf(stderr, \"Unsupported file format.\\n\");","        return 4;","    }","    BITMAPFILEHEADER out_bf = bf;","    BITMAPINFOHEADER out_bi = bi;","    ","    out_bi.biHeight *= n;","\tout_bi.biWidth *= n;","","    int in_padding =  (4 - (bi.biWidth * sizeof(RGBTRIPLE)) % 4) % 4;","    int out_padding = (4 - (out_bi.biWidth * sizeof(RGBTRIPLE)) % 4) % 4;","    ","    out_bi.biSizeImage = abs(out_bi.biHeight) * (out_bi.biWidth * sizeof(RGBTRIPLE) + out_padding);","    out_bf.bfSize = (out_bi.biSizeImage + 54);","    ","    fwrite(&out_bf, sizeof(BITMAPFILEHEADER), 1, outptr);","    fwrite(&out_bi, sizeof(BITMAPINFOHEADER), 1, outptr);","","","    for (int i = 0, biHeight = abs(bi.biHeight); i < biHeight; i++)","    {","        for (int i = 0; i < n; i++)","        {","            fseek(inptr, 54 + (bi.biWidth * 3 + in_padding) * i, SEEK_SET);","            for (int i = 0; i < bi.biWidth; i++)","            {","                RGBTRIPLE triple;","                fread(&triple, sizeof(RGBTRIPLE), 1, inptr);","                for (int i = 0; i < n; i++)","                {","                    fwrite(&triple, sizeof(RGBTRIPLE), 1, outptr);","                }","            }","            ","            for (int i = 0; i < out_padding; i++)","            {","                fputc(0x00, outptr);","            }","        }","    }","","","    fclose(inptr);","    fclose(outptr);","    return 0;","}"],"id":1}],[{"start":{"row":8,"column":0},"end":{"row":8,"column":1},"action":"remove","lines":["/"],"id":2}],[{"start":{"row":8,"column":0},"end":{"row":8,"column":1},"action":"insert","lines":["\\"],"id":3}],[{"start":{"row":0,"column":0},"end":{"row":0,"column":1},"action":"remove","lines":["*"],"id":4}],[{"start":{"row":0,"column":1},"end":{"row":0,"column":2},"action":"insert","lines":["*"],"id":5}],[{"start":{"row":8,"column":0},"end":{"row":8,"column":2},"action":"remove","lines":["\\*"],"id":6}],[{"start":{"row":8,"column":0},"end":{"row":8,"column":1},"action":"insert","lines":["*"],"id":7},{"start":{"row":8,"column":1},"end":{"row":8,"column":2},"action":"insert","lines":["/"]}],[{"start":{"row":0,"column":9},"end":{"row":0,"column":10},"action":"remove","lines":[" "],"id":8},{"start":{"row":52,"column":0},"end":{"row":52,"column":4},"action":"remove","lines":["    "]},{"start":{"row":54,"column":71},"end":{"row":54,"column":72},"action":"remove","lines":[" "]},{"start":{"row":64,"column":0},"end":{"row":64,"column":4},"action":"remove","lines":["    "]},{"start":{"row":70,"column":0},"end":{"row":70,"column":4},"action":"remove","lines":["    "]},{"start":{"row":73,"column":0},"end":{"row":73,"column":4},"action":"remove","lines":["    "]},{"start":{"row":92,"column":0},"end":{"row":92,"column":12},"action":"remove","lines":["            "]}],[{"start":{"row":89,"column":58},"end":{"row":89,"column":59},"action":"insert","lines":["l"],"id":9}],[{"start":{"row":89,"column":58},"end":{"row":89,"column":59},"action":"remove","lines":["l"],"id":10}],[{"start":{"row":89,"column":58},"end":{"row":89,"column":59},"action":"insert","lines":["1"],"id":11}],[{"start":{"row":89,"column":59},"end":{"row":89,"column":60},"action":"insert","lines":[" "],"id":12}],[{"start":{"row":89,"column":59},"end":{"row":89,"column":60},"action":"remove","lines":[" "],"id":13},{"start":{"row":89,"column":58},"end":{"row":89,"column":59},"action":"remove","lines":["1"]},{"start":{"row":89,"column":57},"end":{"row":89,"column":58},"action":"remove","lines":[" "]}],[{"start":{"row":89,"column":57},"end":{"row":89,"column":58},"action":"insert","lines":[" "],"id":14}],[{"start":{"row":77,"column":0},"end":{"row":98,"column":5},"action":"remove","lines":["","    for (int i = 0, biHeight = abs(bi.biHeight); i < biHeight; i++)","    {","        for (int i = 0; i < n; i++)","        {","            fseek(inptr, 54 + (bi.biWidth * 3 + in_padding) * i, SEEK_SET);","            for (int i = 0; i < bi.biWidth; i++)","            {","                RGBTRIPLE triple;","                fread(&triple, sizeof(RGBTRIPLE), 1, inptr);","                for (int i = 0; i < n; i++)","                {","                    fwrite(&triple, sizeof(RGBTRIPLE), 1, outptr);","                }","            }","","            for (int i = 0; i < out_padding; i++)","            {","                fputc(0x00, outptr);","            }","        }","    }"],"id":15},{"start":{"row":77,"column":0},"end":{"row":107,"column":5},"action":"insert","lines":[" for (int i = 0, biHeight = abs(bi.biHeight); i < biHeight; i++)","    {","        for (int j = 0; j < scale_size; j++)","        {","            // set pointer to beginning of line","            fseek(inptr, 54 + (bi.biWidth * 3 + in_padding) * i, SEEK_SET);","            ","            // iterate over pixels in scanline","            for (int k = 0; k < bi.biWidth; k++)","            {","                // temporary storage","                RGBTRIPLE triple;","        ","                // read RGB triple from infile","                fread(&triple, sizeof(RGBTRIPLE), 1, inptr);","                ","                // iterate each pixel n times","                for (int l = 0; l < scale_size; l++)","                {","                    // write RGB triple to outfile","                    fwrite(&triple, sizeof(RGBTRIPLE), 1, outptr);","                }","            }","            ","            // then add it back to outfile","            for (int y = 0; y < out_padding; y++)","            {","                fputc(0x00, outptr);","            }","        }","    }"]}],[{"start":{"row":81,"column":0},"end":{"row":81,"column":47},"action":"remove","lines":["            // set pointer to beginning of line"],"id":16},{"start":{"row":80,"column":9},"end":{"row":81,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":82,"column":0},"end":{"row":83,"column":46},"action":"remove","lines":["            ","            // iterate over pixels in scanline"],"id":17},{"start":{"row":81,"column":75},"end":{"row":82,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":84,"column":0},"end":{"row":84,"column":36},"action":"remove","lines":["                // temporary storage"],"id":18},{"start":{"row":83,"column":13},"end":{"row":84,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":85,"column":0},"end":{"row":86,"column":46},"action":"remove","lines":["        ","                // read RGB triple from infile"],"id":19},{"start":{"row":84,"column":33},"end":{"row":85,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":86,"column":0},"end":{"row":87,"column":45},"action":"remove","lines":["                ","                // iterate each pixel n times"],"id":20},{"start":{"row":85,"column":60},"end":{"row":86,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":88,"column":0},"end":{"row":88,"column":50},"action":"remove","lines":["                    // write RGB triple to outfile"],"id":21},{"start":{"row":87,"column":17},"end":{"row":88,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":91,"column":0},"end":{"row":92,"column":42},"action":"remove","lines":["            ","            // then add it back to outfile"],"id":22},{"start":{"row":90,"column":13},"end":{"row":91,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":91,"column":21},"end":{"row":91,"column":22},"action":"remove","lines":["y"],"id":23}],[{"start":{"row":91,"column":21},"end":{"row":91,"column":22},"action":"insert","lines":["x"],"id":24}],[{"start":{"row":91,"column":28},"end":{"row":91,"column":29},"action":"remove","lines":["y"],"id":25}],[{"start":{"row":91,"column":28},"end":{"row":91,"column":29},"action":"insert","lines":["x"],"id":26}],[{"start":{"row":91,"column":45},"end":{"row":91,"column":46},"action":"remove","lines":["y"],"id":27}],[{"start":{"row":91,"column":45},"end":{"row":91,"column":46},"action":"insert","lines":["x"],"id":28}],[{"start":{"row":26,"column":19},"end":{"row":26,"column":20},"action":"remove","lines":[" "],"id":29},{"start":{"row":26,"column":18},"end":{"row":26,"column":19},"action":"remove","lines":["="]}],[{"start":{"row":26,"column":18},"end":{"row":26,"column":19},"action":"insert","lines":[" "],"id":30}],[{"start":{"row":0,"column":0},"end":{"row":102,"column":1},"action":"remove","lines":["/*Layout-","Open the file.","Update the outfile's header info","Read infile's scanline pixel by pixel","Resize horizontally","Address the padding adjustments","resize vertically","REMEMBER TO REFERENCE TO COPY.C","*/","","","#include <stdio.h>","#include <stdlib.h>","#include \"bmp.h\"","","int main(int argc, char* argv[])","{","    if (argc != 4)","    {","        return 1;","    }","","    char* infile = argv[2];","\tchar* outfile = argv[3];","","    int n = atoi(argv[1]);","    if (n =< 100 = false) // must be less than or equal to 100","    {","        return 1;","    }","","    FILE* inptr = fopen(infile, \"r\"); //remember that \"r\" is for reading only. file pointer is placed at the beginning of the file.","    if (inptr == NULL)","    {","\t\tprintf(\"Could not open %s.\\n\", infile);","        return 2;","    }","","    FILE* outptr = fopen(outfile, \"w\");","    if (outptr == NULL)","    {","        fclose(inptr);","\t\tfprintf(stderr, \"Could not create %s.\\n\", outfile);","        return 3;","    }","","    BITMAPFILEHEADER bf;","    fread(&bf, sizeof(BITMAPFILEHEADER), 1, inptr);","","    // read infile's BITMAPINFOHEADER","    BITMAPINFOHEADER bi;","    fread(&bi, sizeof(BITMAPINFOHEADER), 1, inptr);","","    // ensure infile is (likely) a 24-bit uncompressed BMP 4.0","    if (bf.bfType != 0x4d42 || bf.bfOffBits != 54 || bi.biSize != 40 ||","        bi.biBitCount != 24 || bi.biCompression != 0)","    {","        fclose(outptr);","        fclose(inptr);","        fprintf(stderr, \"Unsupported file format.\\n\");","        return 4;","    }","    BITMAPFILEHEADER out_bf = bf;","    BITMAPINFOHEADER out_bi = bi;","","    out_bi.biHeight *= n;","\tout_bi.biWidth *= n;","","    int in_padding =  (4 - (bi.biWidth * sizeof(RGBTRIPLE)) % 4) % 4;","    int out_padding = (4 - (out_bi.biWidth * sizeof(RGBTRIPLE)) % 4) % 4;","","    out_bi.biSizeImage = abs(out_bi.biHeight) * (out_bi.biWidth * sizeof(RGBTRIPLE) + out_padding);","    out_bf.bfSize = (out_bi.biSizeImage + 54);","","    fwrite(&out_bf, sizeof(BITMAPFILEHEADER), 1, outptr);","    fwrite(&out_bi, sizeof(BITMAPINFOHEADER), 1, outptr);",""," for (int i = 0, biHeight = abs(bi.biHeight); i < biHeight; i++)","    {","        for (int j = 0; j < scale_size; j++)","        {","            fseek(inptr, 54 + (bi.biWidth * 3 + in_padding) * i, SEEK_SET);","            for (int k = 0; k < bi.biWidth; k++)","            {","                RGBTRIPLE triple;","                fread(&triple, sizeof(RGBTRIPLE), 1, inptr);","                for (int l = 0; l < scale_size; l++)","                {","                    fwrite(&triple, sizeof(RGBTRIPLE), 1, outptr);","                }","            }","            for (int x = 0; x < out_padding; x++)","            {","                fputc(0x00, outptr);","            }","        }","    }","","","    fclose(inptr);","    fclose(outptr);","    return 0;","}"],"id":31},{"start":{"row":0,"column":0},"end":{"row":108,"column":1},"action":"insert","lines":["/*Layout-","Open the file.","Update the outfile's header info","Read infile's scanline pixel by pixel","Resize horizontally","Address the padding adjustments","resize vertically","REMEMBER TO REFERENCE TO COPY.C","*/","","#include <stdio.h>","#include <stdlib.h>","#include \"bmp.h\"","","int main(int argc, char *argv[])","{","    if (argc != 4)","    {","        return 1;","    }","","    int n = atoi(argv[1]);","    if (n < 0 || n > 100) //n, the scale factor, must be between 0 and 100","    {","        return 5;","    }","","    char *infile = argv[2];","    char *outfile = argv[3];","    FILE *inptr = fopen(infile, \"r\");","    if (inptr == NULL)","    {","        return 2;","    }","    FILE *outptr = fopen(outfile, \"w\");","    if (outptr == NULL)","    {","        fclose(inptr);","        return 3;","    }","","    BITMAPFILEHEADER bf, r_bf; //must be equal to headers outfile ","    fread(&bf, sizeof(BITMAPFILEHEADER), 1, inptr);","    r_bf = bf;","","    BITMAPINFOHEADER bi, r_bi; //same as header infile","    fread(&bi, sizeof(BITMAPINFOHEADER), 1, inptr);","    r_bi = bi;","","    r_bi.biWidth = bi.biWidth * n;","    r_bi.biHeight = bi.biHeight * n;","","    if (bi.biSize != 40 || bf.bfType != 0x4d42 || bf.bfOffBits != 54 || bi.biBitCount != 24 || bi.biCompression != 0)","    {","        fclose(outptr);","        fclose(inptr);","        return 4;","    }","","","    int padding = (4 - (bi.biWidth * sizeof(RGBTRIPLE)) % 4) % 4;","    int out_padding = (4 - (r_bi.biWidth * sizeof(RGBTRIPLE)) % 4) % 4;","","    r_bf.bfSize = 54 + abs(r_bi.biHeight) * r_bi.biWidth * 3 + abs(r_bi.biHeight) *  out_padding;","\tr_bi.biSizeImage = ((((r_bi.biWidth * r_bi.biBitCount) + 31) & ~31) / 8) * abs(r_bi.biHeight);","","    fwrite(&r_bf, sizeof(BITMAPFILEHEADER), 1, outptr);","    fwrite(&r_bi, sizeof(BITMAPINFOHEADER), 1, outptr);","","","    for (int i = 0, biHeight = abs(bi.biHeight); i < biHeight; i++)","    {","        for (int j = 0; j < n; j++)","        {","","            for (int k = 0; k < bi.biWidth; k++)","            {","                RGBTRIPLE triple;","","                fread(&triple, sizeof(RGBTRIPLE), 1, inptr);","","                // write RGB triple to outfile n times","                for (int x = 0; x < n; x++)","                {","                    fwrite(&triple, sizeof(RGBTRIPLE), 1, outptr);","                }","","","            }","","            // add padding","            for (int y = 0; y < out_padding; y++)","            {","                fputc(0x00, outptr);","            }","","            if (j < n - 1)","            {","                fseek(inptr, -bi.biWidth * sizeof(RGBTRIPLE), SEEK_CUR);","            }","","        }","","        fseek(inptr, padding, SEEK_CUR);","    }","    fclose(inptr);","    fclose(outptr);","    return 0;","}"]}],[{"start":{"row":41,"column":65},"end":{"row":41,"column":66},"action":"remove","lines":[" "],"id":32}]]},"timestamp":1554860547585}